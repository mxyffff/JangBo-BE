<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
  <style>
    .fieldError {
      color: #bd2130;
    }
  </style>
</th:block>

<!-- 사용자 스크립트 추가 -->
<th:block layout:fragment="script">

  <script th:inline="javascript">
    var errorMessage = /*[[${errorMessage}]]*/ null;
    if(errorMessage){
      alert(errorMessage);
    }
  </script>

</th:block>

<div layout:fragment="content">
  <form action="/stores/new" role="form" method="post" enctype="multipart/form-data" th:object="${storeFormDto}">
    <div class="form-group">
      <label th:for="storeName">상점명</label>
      <input type="text" th:field="*{storeName}" class="form-control" placeholder="상점명을 입력해주세요">
      <p th:if="${#fields.hasErrors('storeName')}" th:errors="*{storeName}" class="fieldError"></p>
    </div>
    <div class="form-group">
      <label for="storeImage">상점 이미지</label>
      <input type="file" id="storeImage" name="storeImage" class="form-control" accept="image/*">
    </div>
    <div class="form-group">
      <label th:for="storeAddress">도로명 주소</label>
      <input type="text" th:field="*{storeAddress}" class="form-control" placeholder="도로명 주소를 입력해주세요">
      <p th:if="${#fields.hasErrors('storeAddress')}" th:errors="*{storeAddress}" class="fieldError"></p>
    </div>
    <div class="form-group">
      <label th:for="businessHours">운영 시간</label>
      <input type="text" th:field="*{businessHours}" class="form-control" placeholder="예) 09:00 ~ 18:00">
      <p th:if="${#fields.hasErrors('businessHours')}" th:errors="*{businessHours}" class="fieldError"></p>
    </div>
    <div class="form-group">
      <label th:for="storePhoneNumber">전화번호</label>
      <input type="text" th:field="*{storePhoneNumber}" class="form-control" placeholder="전화번호를 입력해주세요">
      <p th:if="${#fields.hasErrors('storePhoneNumber')}" th:errors="*{storePhoneNumber}" class="fieldError"></p>
    </div>
    <div class="form-group">
      <label th:for="category">카테고리</label>
      <select th:field="*{category}" class="form-control">
        <option value="" disabled selected>카테고리를 선택해주세요</option>
        <option th:each="cat : ${categories}"
                th:value="${cat}"
                th:text="${cat}">카테고리</option>
      </select>
      <p th:if="${#fields.hasErrors('category')}" th:errors="*{category}" class="fieldError"></p>
    </div>
    <div class="form-group">
      <label th:for="dayOff">휴무 요일</label>
      <select th:field="*{dayOff}" class="form-control" multiple id="dayOffSelect">
        <option th:each="day : ${dayOffOptions}"
                th:value="${day}"
                th:text="${day.name() == 'ALWAYS_OPEN' ? '연중무휴' :
                      day.name() == 'MONDAY' ? '월요일' :
                      day.name() == 'TUESDAY' ? '화요일' :
                      day.name() == 'WEDNESDAY' ? '수요일' :
                      day.name() == 'THURSDAY' ? '목요일' :
                      day.name() == 'FRIDAY' ? '금요일' : day}">요일</option>
      </select>
      <p th:if="${#fields.hasErrors('dayOff')}" th:errors="*{dayOff}" class="fieldError"></p>
    </div>
    <div style="text-align: center">
      <button type="submit" class="btn btn-primary" style="">상점 등록하기</button>
    </div>
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
  </form>

</div>

</html>
